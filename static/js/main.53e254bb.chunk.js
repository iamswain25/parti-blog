(window.webpackJsonptest1=window.webpackJsonptest1||[]).push([[0],{247:function(e,t,n){e.exports=n(447)},252:function(e,t,n){},447:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(40),c=n.n(o),l=(n(252),n(33)),i=n(49),u=n(234),s=n(130),m=n(134),p=n(25),f=n(135),d=n.n(f),b=n(211),g=n(29),E=n(19),O=n(99),y=n(46),h=n(55),v=n(32),j=n(212),w=n(20),P=n(45),S=n(8),k=n.n(S);n(310),n(167),n(314),n(448);k.a.initializeApp({apiKey:"AIzaSyAiMC9K7NOKYY96rB8X0szmT9ukkVxsy2M",authDomain:"parti-test1.firebaseapp.com",databaseURL:"https://parti-test1.firebaseio.com",projectId:"parti-test1",storageBucket:"parti-test1.appspot.com",messagingSenderId:"112588953542",appId:"1:112588953542:web:3adeb7d6b9b7569a"});k.a;var C=k.a.firestore();k.a.app().functions("asia-northeast2");k.a.storage();var D=k.a.auth(),I={signInFlow:"popup",signInOptions:[k.a.auth.GoogleAuthProvider.PROVIDER_ID]},N=n(213),B=n.n(N);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var L=function(){var e=r.useState(!1),t=Object(E.a)(e,2),n=t[0],a=t[1],o=r.useState(null),c=Object(E.a)(o,2),i=c[0],u=c[1],s=r.useState(!0),m=Object(E.a)(s,2),f=m[0],S=m[1];function k(){a(!1),S(!0)}return r.useEffect(function(){return D.onAuthStateChanged(function(e){e?(u(e),console.log(e)):u(null),a(!1)})},[]),i?r.createElement(r.Fragment,null,r.createElement(p.StyledNavigationItem,null,r.createElement(l.b,{to:"post"},r.createElement(w.Button,null,"\uae00 \uc4f0\uae30"))),r.createElement(p.StyledNavigationItem,null,r.createElement(j.ButtonGroup,null,r.createElement(w.Button,{onClick:function(){return a(!0)}},r.createElement(O.Avatar,{name:"user",size:"scale1200",src:i.photoURL||""}),r.createElement(P.Block,{paddingLeft:"10px"},i.displayName)))),r.createElement(p.StyledNavigationItem,null,r.createElement(w.Button,{onClick:function(){D.signOut()}},"\ub85c\uadf8\uc544\uc6c3")),r.createElement(v.Modal,{onClose:k,isOpen:n},r.createElement(v.ModalHeader,null,"\ub0b4 \uc815\ubcf4"),r.createElement(v.ModalBody,null,r.createElement(y.FormControl,{label:"\uacc4\uc815\uba85"},r.createElement(h.Input,{value:i.displayName||"",disabled:f,onChange:function(e){return u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},i,{displayName:e.currentTarget.value}))}}))),r.createElement(v.ModalFooter,null,r.createElement(v.ModalButton,{onClick:function(){return D.currentUser.delete().catch(function(e){var t=e.message;return alert(t)})}},"\uacc4\uc815\uc0ad\uc81c"),r.createElement(v.ModalButton,{onClick:k},"\ucde8\uc18c"),f?r.createElement(v.ModalButton,{onClick:function(){return S(!1)}},"\uc218\uc815"):r.createElement(v.ModalButton,{onClick:Object(b.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.currentUser.updateProfile({displayName:i.displayName}).then(function(){return alert("\ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}).then(function(){return S(!0)}).then(function(){return a(!1)}).catch(alert));case 1:case"end":return e.stop()}},e)}))},"\ubcc0\uacbd")))):r.createElement(p.StyledNavigationItem,null,r.createElement(w.Button,{onClick:function(){return a(!0)}},"\ub85c\uadf8\uc778"),r.createElement(v.Modal,{onClose:function(){return a(!1)},isOpen:n},r.createElement(v.ModalHeader,null,"\ub85c\uadf8\uc778 \ubc29\ubc95"),r.createElement(v.ModalBody,null,r.createElement(B.a,{uiConfig:I,firebaseAuth:D}))))},F=function(){return a.a.createElement(p.HeaderNavigation,null,a.a.createElement(p.StyledNavigationList,{$align:p.ALIGN.left},a.a.createElement(p.StyledNavigationItem,null,a.a.createElement(l.b,{to:"/"},a.a.createElement("h1",null,"Parti Blog")))),a.a.createElement(p.StyledNavigationList,{$align:p.ALIGN.center}),a.a.createElement(p.StyledNavigationList,{$align:p.ALIGN.right},a.a.createElement(L,null)))},x=n(100);var M=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.a.useState(e),n=Object(E.a)(t,2),r=n[0];return[r,n[1],r?a.a.createElement(P.Block,{position:"fixed",backgroundColor:"#FFF000AA",width:"100%",height:"100%",top:"0",left:"0",display:r?"flex":"none",alignItems:"center",justifyContent:"center"},a.a.createElement(x.Spinner,{size:96})):null]};function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var T=function(){var e=M(!0),t=Object(E.a)(e,3),n=t[0],a=t[1],o=t[2],c=r.useState([]),i=Object(E.a)(c,2),u=i[0],s=i[1];return r.useEffect(function(){C.collection("posts").orderBy("createdAt").get().then(function(e){return e.docs.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({_id:e.id},e.data())})}).then(function(e){return s(e)}).finally(a.bind(null,!1))},[a]),n?o:r.createElement(r.Fragment,null,u.map(function(e){return r.createElement("ul",{key:e._id},r.createElement("li",null,r.createElement(l.b,{to:"post/".concat(e._id)},e.title),e.commentCount?"(c.commentCount)":"",r.createElement("i",{style:{marginLeft:10}},"-",e.createdAt.toDate().toLocaleString("ko"))))}))},R=n(101);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var H=function(e){var t=M(!1),n=Object(E.a)(t,3),a=n[0],o=n[1],c=n[2],l=r.useState({title:"",content:"",userId:"",userName:"",userPhotoURL:""}),u=Object(E.a)(l,2),s=u[0],m=u[1];return D.currentUser?a?c:r.createElement(r.Fragment,null,r.createElement(y.FormControl,{label:"\uc81c\ubaa9"},r.createElement(h.Input,{autoFocus:!0,value:s.title,onChange:function(e){return m(G({},s,{title:e.currentTarget.value}))}})),r.createElement(y.FormControl,{label:"\ub0b4\uc6a9"},r.createElement(R.Textarea,{value:s.content,onChange:function(e){return m(G({},s,{content:e.currentTarget.value}))}})),r.createElement(w.Button,{onClick:function(){o(!0);var t=D.currentUser,n=t.uid,r=t.photoURL,a=t.displayName;Object.assign(s,{userId:n,userPhotoURL:r,userName:a,createdAt:new Date,updatedAt:new Date}),C.collection("posts").add(s).then(function(){return e.history.push("/")})}},"\uc800\uc7a5")):r.createElement(i.a,{to:"/"})},K=n(458),_=n(460),$=n(457),J=n(459),V=(n(325),function(e){return console.log(e.comments),a.a.createElement(K.a.Group,null,a.a.createElement(_.a,{as:"h3",dividing:!0},"\ub313\uae00"),a.a.createElement(K.a,null,a.a.createElement(K.a.Avatar,{src:"https://react.semantic-ui.com/images/avatar/small/matt.jpg"}),a.a.createElement(K.a.Content,null,a.a.createElement(K.a.Author,{as:"a"},"Matt"),a.a.createElement(K.a.Metadata,null,"Today at 5:42PM"),a.a.createElement(K.a.Text,null,"How artistic!"))),a.a.createElement($.a,{reply:!0},a.a.createElement($.a.TextArea,null),a.a.createElement(J.a,{content:"\ub313\uae00 \ub2ec\uae30",labelPosition:"right",icon:"edit",primary:!0})))}),W=n(141),Y=n(232);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var q=function(e){var t=e.match.params.id,n=M(!0),a=Object(E.a)(n,3),o=a[0],c=a[1],i=a[2];r.useEffect(function(){C.collection("posts").doc(t).get().then(function(e){return e.data()||{}}).then(p).finally(c.bind(null,!1)),C.collection("posts").doc(t).collection("comments").get().then(function(e){return e.docs.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({_id:e.id},e.data())})}).then(y)},[t,c]);var u=r.useState({}),s=Object(E.a)(u,2),m=s[0],p=s[1],f=r.useState([]),d=Object(E.a)(f,2),b=d[0],y=d[1];return o?i:r.createElement(r.Fragment,null,r.createElement(W.HeadingLevel,null,r.createElement(P.Block,{alignItems:"center",display:"flex"},r.createElement(O.Avatar,{name:m.userName,size:"scale1000",src:m.userPhotoURL}),r.createElement("span",{style:{marginLeft:10}},m.userName)),m.createdAt.toDate().toLocaleString("ko"),r.createElement(W.Heading,null,m.title),r.createElement(Y.Paragraph1,null,m.content)),D.currentUser&&D.currentUser.uid===m.userId&&r.createElement(l.b,{to:"/edit/".concat(t)},r.createElement(w.Button,null,"\uc218\uc815")),r.createElement(V,{comments:b}))};function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ee=function(e){var t=e.match.params.id,n=r.useState({}),a=Object(E.a)(n,2),o=a[0],c=a[1],l=r.useState(!0),i=Object(E.a)(l,2),u=i[0],s=i[1];return r.useEffect(function(){C.collection("posts").doc(t).get().then(function(e){return e.data()||{}}).then(c).finally(s.bind(null,!1))},[t]),u?r.createElement(P.Block,{position:"fixed",backgroundColor:"#FFF000AA",width:"100%",height:"100%",top:"0",left:"0",display:u?"flex":"none",alignItems:"center",justifyContent:"center"},r.createElement(x.Spinner,{size:96})):r.createElement(r.Fragment,null,r.createElement(y.FormControl,{label:"\uc81c\ubaa9"},r.createElement(h.Input,{autoFocus:!0,value:o.title,onChange:function(e){return c(Z({},o,{title:e.currentTarget.value}))}})),r.createElement(y.FormControl,{label:"\ub0b4\uc6a9"},r.createElement(R.Textarea,{value:o.content,onChange:function(e){return c(Z({},o,{content:e.currentTarget.value}))}})),r.createElement(w.Button,{onClick:function(){window.confirm("\ub313\uae00\uacfc \ud568\uaed8 \ubaa8\ub450 \uc0ad\uc81c\ub429\ub2c8\ub2e4. \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(s(!0),C.collection("posts").doc(t).delete().then(function(){return e.history.push("/")}))},kind:w.KIND.secondary},"\uc0ad\uc81c"),r.createElement(w.Button,{onClick:function(){s(!0);var n=D.currentUser,r=n.uid,a=n.photoURL,c=n.displayName;Object.assign(o,{userId:r,userPhotoURL:a,userName:c,updatedAt:new Date}),C.collection("posts").doc(t).update(o).then(function(){return e.history.push("/")})},kind:w.KIND.primary},"\uc800\uc7a5"))},te=new u.a,ne=function(){return a.a.createElement("div",{style:{padding:"0px 1.0875rem 1.45rem",paddingTop:0}},a.a.createElement(l.a,{basename:"/parti-blog"},a.a.createElement(s.Provider,{value:te},a.a.createElement(m.BaseProvider,{theme:m.LightTheme},a.a.createElement(i.b,{path:"/",component:F}),a.a.createElement(i.d,null,a.a.createElement(i.b,{path:"/",exact:!0,component:T}),a.a.createElement(i.b,{path:"/post",exact:!0,component:H}),a.a.createElement(i.b,{path:"/post/:id",exact:!0,component:q}),a.a.createElement(i.b,{path:"/edit/:id",exact:!0,component:ee}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[247,1,2]]]);
//# sourceMappingURL=main.53e254bb.chunk.js.map