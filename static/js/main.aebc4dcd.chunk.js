(window.webpackJsonptest1=window.webpackJsonptest1||[]).push([[0],{248:function(e,t,n){e.exports=n(449)},253:function(e,t,n){},449:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(40),c=n.n(o),l=(n(253),n(33)),i=n(49),u=n(234),s=n(132),m=n(136),p=n(25),d=n(67),f=n.n(d),b=n(100),g=n(29),E=n(17),O=n(101),h=n(46),y=n(55),v=n(32),j=n(213),w=n(18),P=n(45),k=n(8),C=n.n(k);n(312),n(169),n(316),n(450);C.a.initializeApp({apiKey:"AIzaSyAiMC9K7NOKYY96rB8X0szmT9ukkVxsy2M",authDomain:"parti-test1.firebaseapp.com",databaseURL:"https://parti-test1.firebaseio.com",projectId:"parti-test1",storageBucket:"parti-test1.appspot.com",messagingSenderId:"112588953542",appId:"1:112588953542:web:3adeb7d6b9b7569a"});var S=C.a,I=C.a.firestore();C.a.app().functions("asia-northeast2");C.a.storage();var A=C.a.auth(),D={signInFlow:"popup",signInOptions:[C.a.auth.GoogleAuthProvider.PROVIDER_ID]},N=n(214),U=n.n(N);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var L=function(){var e=r.useState(!1),t=Object(E.a)(e,2),n=t[0],a=t[1],o=r.useState(null),c=Object(E.a)(o,2),i=c[0],u=c[1],s=r.useState(!0),m=Object(E.a)(s,2),d=m[0],k=m[1];function C(){a(!1),k(!0)}return r.useEffect(function(){return A.onAuthStateChanged(function(e){e?(u(e),console.log(e)):u(null),a(!1)})},[]),i?r.createElement(r.Fragment,null,r.createElement(p.StyledNavigationItem,null,r.createElement(l.b,{to:"post"},r.createElement(w.Button,null,"\uae00 \uc4f0\uae30"))),r.createElement(p.StyledNavigationItem,null,r.createElement(j.ButtonGroup,null,r.createElement(w.Button,{onClick:function(){return a(!0)}},r.createElement(O.Avatar,{name:"user",size:"scale1200",src:i.photoURL||""}),r.createElement(P.Block,{paddingLeft:"10px"},i.displayName)))),r.createElement(p.StyledNavigationItem,null,r.createElement(w.Button,{onClick:function(){A.signOut()}},"\ub85c\uadf8\uc544\uc6c3")),r.createElement(v.Modal,{onClose:C,isOpen:n},r.createElement(v.ModalHeader,null,"\ub0b4 \uc815\ubcf4"),r.createElement(v.ModalBody,null,r.createElement(h.FormControl,{label:"\uacc4\uc815\uba85"},r.createElement(y.Input,{value:i.displayName||"",disabled:d,onChange:function(e){return u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},i,{displayName:e.currentTarget.value}))}}))),r.createElement(v.ModalFooter,null,r.createElement(v.ModalButton,{onClick:function(){return A.currentUser.delete().catch(function(e){var t=e.message;return alert(t)})}},"\uacc4\uc815\uc0ad\uc81c"),r.createElement(v.ModalButton,{onClick:C},"\ucde8\uc18c"),d?r.createElement(v.ModalButton,{onClick:function(){return k(!1)}},"\uc218\uc815"):r.createElement(v.ModalButton,{onClick:Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A.currentUser.updateProfile({displayName:i.displayName}).then(function(){return alert("\ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}).then(function(){return k(!0)}).then(function(){return a(!1)}).catch(alert));case 1:case"end":return e.stop()}},e)}))},"\ubcc0\uacbd")))):r.createElement(p.StyledNavigationItem,null,r.createElement(w.Button,{onClick:function(){return a(!0)}},"\ub85c\uadf8\uc778"),r.createElement(v.Modal,{onClose:function(){return a(!1)},isOpen:n},r.createElement(v.ModalHeader,null,"\ub85c\uadf8\uc778 \ubc29\ubc95"),r.createElement(v.ModalBody,null,r.createElement(U.a,{uiConfig:D,firebaseAuth:A}))))},F=function(){return a.a.createElement(p.HeaderNavigation,null,a.a.createElement(p.StyledNavigationList,{$align:p.ALIGN.left},a.a.createElement(p.StyledNavigationItem,null,a.a.createElement(l.b,{to:"/"},a.a.createElement("h1",null,"Parti Blog")))),a.a.createElement(p.StyledNavigationList,{$align:p.ALIGN.center}),a.a.createElement(p.StyledNavigationList,{$align:p.ALIGN.right},a.a.createElement(L,null)))},x=n(102);var T=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.a.useState(e),n=Object(E.a)(t,2),r=n[0];return[r,n[1],r?a.a.createElement(P.Block,{position:"fixed",backgroundColor:"#FFF000AA",width:"100%",height:"100%",top:"0",left:"0",display:r?"flex":"none",alignItems:"center",justifyContent:"center"},a.a.createElement(x.Spinner,{size:96})):null]};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var M=function(){var e=T(!0),t=Object(E.a)(e,3),n=t[0],a=t[1],o=t[2],c=r.useState([]),i=Object(E.a)(c,2),u=i[0],s=i[1];return r.useEffect(function(){I.collection("posts").orderBy("createdAt").get().then(function(e){return e.docs.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({_id:e.id},e.data())})}).then(function(e){return s(e)}).finally(a.bind(null,!1))},[a]),n?o:r.createElement(r.Fragment,null,u.map(function(e){return r.createElement("ul",{key:e._id},r.createElement("li",null,r.createElement(l.b,{to:"post/".concat(e._id)},e.title),e.commentCount?" (".concat(e.commentCount,"\uac1c\uc758 \ub313\uae00)"):"",r.createElement("i",{style:{marginLeft:10}},"-",e.createdAt.toDate().toLocaleString("ko"))))}))},z=n(103),_={title:"",content:"",userId:"",userName:"",userPhotoURL:"",commentCount:0,likeCount:0,createdAt:S.firestore.Timestamp.now(),updatedAt:S.firestore.Timestamp.now()};function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var V=function(e){var t=T(!1),n=Object(E.a)(t,3),a=n[0],o=n[1],c=n[2],l=r.useState(_),u=Object(E.a)(l,2),s=u[0],m=u[1];return A.currentUser?a?c:r.createElement(r.Fragment,null,r.createElement(h.FormControl,{label:"\uc81c\ubaa9"},r.createElement(y.Input,{autoFocus:!0,value:s.title,onChange:function(e){return m(H({},s,{title:e.currentTarget.value}))}})),r.createElement(h.FormControl,{label:"\ub0b4\uc6a9"},r.createElement(z.Textarea,{value:s.content,onChange:function(e){return m(H({},s,{content:e.currentTarget.value}))}})),r.createElement(w.Button,{onClick:function(){o(!0);var t=A.currentUser,n=t.uid,r=t.photoURL,a=t.displayName;Object.assign(s,{userId:n,userPhotoURL:r,userName:a,createdAt:new Date,updatedAt:new Date}),I.collection("posts").add(s).then(function(){return e.history.push("/")})}},"\uc800\uc7a5")):r.createElement(i.a,{to:"/"})},K=n(459),$=n(461),J=n(460),W=n(458),Y=(n(327),function(e){var t=a.a.useState(""),n=Object(E.a)(t,2),r=n[0],o=n[1],c=a.a.useState(""),l=Object(E.a)(c,2),i=l[0],u=l[1],s=a.a.useState(!1),m=Object(E.a)(s,2),p=m[0],d=m[1];function f(){var t=A.currentUser;I.doc("posts/".concat(e.docId,"/comments/").concat(p)).update({content:i,updatedAt:S.firestore.Timestamp.now(),userName:t.displayName,userPhotoURL:t.photoURL}),u(""),d(!1)}return a.a.createElement(K.a.Group,{size:"large"},a.a.createElement($.a,{as:"h3",dividing:!0},"\ub313\uae00"),e.comments.map(function(t,n){return a.a.createElement(K.a,{key:n},a.a.createElement(K.a.Avatar,{src:t.userPhotoURL}),a.a.createElement(K.a.Content,null,a.a.createElement(K.a.Author,{as:"span"},t.userName),a.a.createElement(K.a.Metadata,null,t.updatedAt.toDate().toLocaleString("ko")),A.currentUser&&t.userId===A.currentUser.uid&&!1===p&&a.a.createElement(a.a.Fragment,null,a.a.createElement(J.a,{onClick:function(e){d(t._id),u(t.content)},content:"\uc218\uc815",floated:"right"}),a.a.createElement(J.a,{onClick:function(n){window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&function(t){I.doc("posts/".concat(e.docId,"/comments/").concat(t)).delete(),I.doc("posts/".concat(e.docId)).update({commentCount:S.firestore.FieldValue.increment(-1)})}(t._id)},secondary:!0,content:"\uc0ad\uc81c",floated:"right"})),p===t._id?a.a.createElement(W.a,null,a.a.createElement(W.a.Input,{action:{content:"\uc218\uc815",onClick:f},value:i,onChange:function(e,t){return u(t.value)}})):a.a.createElement(K.a.Text,null,t.content)))}),A.currentUser&&a.a.createElement(W.a,{reply:!0},a.a.createElement(W.a.Input,{label:"\ub313\uae00 \ub2ec\uae30",action:{icon:"edit",primary:!0,onClick:function(){var t=A.currentUser;Promise.all([I.doc("posts/".concat(e.docId)).collection("comments").add({content:r,createdAt:S.firestore.Timestamp.now(),updatedAt:S.firestore.Timestamp.now(),userId:t.uid,userName:t.displayName,userPhotoURL:t.photoURL}),I.collection("posts").doc(e.docId).update({commentCount:S.firestore.FieldValue.increment(1)})]),o("")}},value:r,onChange:function(e,t){return o(t.value)}})))}),X=n(142),q=n(143),Q=n(70);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var ee=function(e){var t=e.match.params.id,n=T(!0),o=Object(E.a)(n,3),c=o[0],i=o[1],u=o[2],s=Object(r.useCallback)(function(){var e=Object(b.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.collection("posts").doc(t).collection("likedUser").doc(A.currentUser.uid).get();case 2:e.sent.exists?(alert("\uc774\ubbf8 \uacf5\uac10\ud558\uc168\uc2b5\ub2c8\ub2e4."),I.collection("posts").doc(t).update({likeCount:S.firestore.FieldValue.increment(-1)})):(console.log(t),I.collection("posts").doc(t).update({likeCount:S.firestore.FieldValue.increment(1)}),I.collection("posts").doc(t).collection("likedUser").doc(A.currentUser.uid).set({createdAt:new Date}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[]);a.a.useEffect(function(){var e=I.collection("posts").doc(t).collection("comments").orderBy("createdAt","asc").onSnapshot(function(e){return k(e.docs.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({_id:e.id},e.data())}))});return Promise.all([I.collection("posts").doc(t).onSnapshot(function(e){return h(e.data())})]).then(function(){return i(!1)}),e},[t,i,s]);var m=a.a.useState(_),p=Object(E.a)(m,2),d=p[0],h=p[1],y=a.a.useState([]),v=Object(E.a)(y,2),j=v[0],k=v[1];return console.log(d),a.a.createElement(a.a.Fragment,null,a.a.createElement(X.HeadingLevel,null,a.a.createElement(P.Block,{alignItems:"center",display:"flex"},a.a.createElement(O.Avatar,{name:d.userName,size:"scale1000",src:d.userPhotoURL}),a.a.createElement("span",{style:{marginLeft:10}},d.userName)),d.createdAt.toDate().toLocaleString("ko"),a.a.createElement(X.Heading,null,d.title),a.a.createElement(q.Paragraph1,null,d.content),a.a.createElement(q.Paragraph1,null,a.a.createElement(w.Button,{shape:w.SHAPE.round,onClick:function(){return s(t)}},a.a.createElement(Q.a,{name:"heart outline"})),d.likeCount||0)),A.currentUser&&A.currentUser.uid===d.userId&&a.a.createElement(l.b,{to:"/edit/".concat(t)},a.a.createElement(w.Button,null,"\uc218\uc815")),a.a.createElement(Y,{comments:j,docId:t,setSpinner:i}),c&&u)};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var re=function(e){var t=e.match.params.id,n=r.useState(_),a=Object(E.a)(n,2),o=a[0],c=a[1],l=r.useState(!0),i=Object(E.a)(l,2),u=i[0],s=i[1];return r.useEffect(function(){I.collection("posts").doc(t).get().then(function(e){return e.data()}).then(c).finally(s.bind(null,!1))},[t]),u?r.createElement(P.Block,{position:"fixed",backgroundColor:"#FFF000AA",width:"100%",height:"100%",top:"0",left:"0",display:u?"flex":"none",alignItems:"center",justifyContent:"center"},r.createElement(x.Spinner,{size:96})):r.createElement(r.Fragment,null,r.createElement(h.FormControl,{label:"\uc81c\ubaa9"},r.createElement(y.Input,{autoFocus:!0,value:o.title,onChange:function(e){return c(ne({},o,{title:e.currentTarget.value}))}})),r.createElement(h.FormControl,{label:"\ub0b4\uc6a9"},r.createElement(z.Textarea,{value:o.content,onChange:function(e){return c(ne({},o,{content:e.currentTarget.value}))}})),r.createElement(w.Button,{onClick:function(){window.confirm("\ub313\uae00\uacfc \ud568\uaed8 \ubaa8\ub450 \uc0ad\uc81c\ub429\ub2c8\ub2e4. \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(s(!0),I.collection("posts").doc(t).delete().then(function(){return e.history.push("/")}))},kind:w.KIND.secondary},"\uc0ad\uc81c"),r.createElement(w.Button,{onClick:function(){s(!0);var n=A.currentUser,r=n.uid,a=n.photoURL,c=n.displayName;Object.assign(o,{userId:r,userPhotoURL:a,userName:c,updatedAt:new Date}),I.collection("posts").doc(t).update(o).then(function(){return e.history.push("/")})},kind:w.KIND.primary},"\uc800\uc7a5"))},ae=new u.a,oe=function(){return a.a.createElement("div",{style:{padding:"0px 1.0875rem 1.45rem",paddingTop:0}},a.a.createElement(l.a,{basename:"/parti-blog"},a.a.createElement(s.Provider,{value:ae},a.a.createElement(m.BaseProvider,{theme:m.LightTheme},a.a.createElement(i.b,{path:"/",component:F}),a.a.createElement(i.d,null,a.a.createElement(i.b,{path:"/",exact:!0,component:M}),a.a.createElement(i.b,{path:"/post",exact:!0,component:V}),a.a.createElement(i.b,{path:"/post/:id",exact:!0,component:ee}),a.a.createElement(i.b,{path:"/edit/:id",exact:!0,component:re}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[248,1,2]]]);
//# sourceMappingURL=main.aebc4dcd.chunk.js.map